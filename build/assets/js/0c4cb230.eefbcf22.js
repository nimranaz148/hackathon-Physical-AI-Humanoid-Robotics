"use strict";(globalThis.webpackChunkphysical_ai_textbook=globalThis.webpackChunkphysical_ai_textbook||[]).push([[822],{7410(n,e,i){i.r(e),i.d(e,{assets:()=>a,contentTitle:()=>l,default:()=>h,frontMatter:()=>o,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"module2/week6-gazebo","title":"Robot Simulation with Gazebo","description":"Physics simulation, URDF/SDF formats, and building digital twins for humanoid robots","source":"@site/docs/module2/week6-gazebo.md","sourceDirName":"module2","slug":"/module2/week6-gazebo","permalink":"/physical-ai-and-humanoid-robotics/docs/module2/week6-gazebo","draft":false,"unlisted":false,"editUrl":"https://github.com/nimranaz148/docs/module2/week6-gazebo.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1,"title":"Robot Simulation with Gazebo","description":"Physics simulation, URDF/SDF formats, and building digital twins for humanoid robots","keywords":["gazebo","simulation","urdf","sdf","physics","digital-twin"]},"sidebar":"tutorialSidebar","previous":{"title":"Module 2: Gazebo & Unity","permalink":"/physical-ai-and-humanoid-robotics/docs/category/module-2-gazebo--unity"},"next":{"title":"Unity Integration and Sensor Simulation","permalink":"/physical-ai-and-humanoid-robotics/docs/module2/week7-gazebo-unity"}}');var s=i(4848),t=i(8453);const o={sidebar_position:1,title:"Robot Simulation with Gazebo",description:"Physics simulation, URDF/SDF formats, and building digital twins for humanoid robots",keywords:["gazebo","simulation","urdf","sdf","physics","digital-twin"]},l="Week 6: Robot Simulation with Gazebo",a={},d=[{value:"Learning Outcomes",id:"learning-outcomes",level:2},{value:"The Physics (Why)",id:"the-physics-why",level:2},{value:"The Analogy (Mental Model)",id:"the-analogy-mental-model",level:2},{value:"The Visualization (Simulation Architecture)",id:"the-visualization-simulation-architecture",level:2},{value:"The Code (Implementation)",id:"the-code-implementation",level:2},{value:"Installation (Ubuntu 22.04)",id:"installation-ubuntu-2204",level:3},{value:"URDF Robot Description",id:"urdf-robot-description",level:3},{value:"SDF World File",id:"sdf-world-file",level:3},{value:"ROS 2 Gazebo Bridge",id:"ros-2-gazebo-bridge",level:3},{value:"The Hardware Reality (Warning)",id:"the-hardware-reality-warning",level:2},{value:"URDF vs SDF Comparison",id:"urdf-vs-sdf-comparison",level:3},{value:"Assessment",id:"assessment",level:2},{value:"Recall",id:"recall",level:3},{value:"Apply",id:"apply",level:3},{value:"Analyze",id:"analyze",level:3}];function c(n){const e={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.header,{children:(0,s.jsx)(e.h1,{id:"week-6-robot-simulation-with-gazebo",children:"Week 6: Robot Simulation with Gazebo"})}),"\n",(0,s.jsx)(e.h2,{id:"learning-outcomes",children:"Learning Outcomes"}),"\n",(0,s.jsx)(e.p,{children:"By the end of this chapter, you should be able to:"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"Set up and configure the Gazebo simulation environment"}),"\n",(0,s.jsx)(e.li,{children:"Understand URDF and SDF robot description formats"}),"\n",(0,s.jsx)(e.li,{children:"Simulate physics, gravity, and collisions accurately"}),"\n",(0,s.jsx)(e.li,{children:"Create custom simulation worlds for humanoid testing"}),"\n",(0,s.jsx)(e.li,{children:"Bridge Gazebo with ROS 2 for robot control"}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"the-physics-why",children:"The Physics (Why)"}),"\n",(0,s.jsx)(e.p,{children:"Before deploying a humanoid robot in the real world, you need a safe environment to test algorithms. Real robots are expensive ($10k-$100k+), can be damaged by falls, and pose safety risks during development."}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"Digital twins"})," solve this by creating virtual replicas of physical robots. In simulation, you can:"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"Test walking algorithms without risking hardware damage"}),"\n",(0,s.jsx)(e.li,{children:"Simulate dangerous scenarios (falling, collisions) safely"}),"\n",(0,s.jsx)(e.li,{children:"Iterate rapidly on control algorithms"}),"\n",(0,s.jsx)(e.li,{children:"Generate unlimited training data for AI models"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"Gazebo provides accurate physics simulation including gravity, friction, collision detection, and sensor modeling\u2014essential for developing robust robotic systems."}),"\n",(0,s.jsx)(e.h2,{id:"the-analogy-mental-model",children:"The Analogy (Mental Model)"}),"\n",(0,s.jsxs)(e.p,{children:["Think of ",(0,s.jsx)(e.strong,{children:"Gazebo as a physics laboratory"})," where you can experiment with robots under controlled conditions. Just as aerospace engineers use wind tunnels to test aircraft before flight, roboticists use Gazebo to test robots before real-world deployment."]}),"\n",(0,s.jsxs)(e.table,{children:[(0,s.jsx)(e.thead,{children:(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.th,{children:"Environment"}),(0,s.jsx)(e.th,{children:"Purpose"}),(0,s.jsx)(e.th,{children:"Fidelity"}),(0,s.jsx)(e.th,{children:"Speed"})]})}),(0,s.jsxs)(e.tbody,{children:[(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.strong,{children:"Gazebo"})}),(0,s.jsx)(e.td,{children:"Physics accuracy"}),(0,s.jsx)(e.td,{children:"High"}),(0,s.jsx)(e.td,{children:"Medium"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.strong,{children:"Unity"})}),(0,s.jsx)(e.td,{children:"Visual fidelity"}),(0,s.jsx)(e.td,{children:"Very High"}),(0,s.jsx)(e.td,{children:"Fast"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.strong,{children:"Real World"})}),(0,s.jsx)(e.td,{children:"Ground truth"}),(0,s.jsx)(e.td,{children:"Perfect"}),(0,s.jsx)(e.td,{children:"Real-time"})]})]})]}),"\n",(0,s.jsx)(e.h2,{id:"the-visualization-simulation-architecture",children:"The Visualization (Simulation Architecture)"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-mermaid",children:'graph TB\r\n    subgraph "Gazebo Simulation"\r\n        A[World SDF] --\x3e B[Physics Engine]\r\n        C[Robot URDF/SDF] --\x3e B\r\n        B --\x3e D[Collision Detection]\r\n        B --\x3e E[Dynamics Solver]\r\n        D --\x3e F[Contact Forces]\r\n        E --\x3e G[Joint States]\r\n    end\r\n    \r\n    subgraph "ROS 2 Bridge"\r\n        F --\x3e H[/contact_sensor]\r\n        G --\x3e I[/joint_states]\r\n        J[/cmd_vel] --\x3e B\r\n    end\r\n    \r\n    subgraph "Control Nodes"\r\n        I --\x3e K[State Estimator]\r\n        K --\x3e L[Controller]\r\n        L --\x3e J\r\n    end\n'})}),"\n",(0,s.jsx)(e.h2,{id:"the-code-implementation",children:"The Code (Implementation)"}),"\n",(0,s.jsx)(e.h3,{id:"installation-ubuntu-2204",children:"Installation (Ubuntu 22.04)"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"# Install Gazebo Harmonic (recommended for ROS 2 Humble)\r\nsudo apt-get update\r\nsudo apt-get install ros-humble-ros-gz\r\n\r\n# Verify installation\r\ngz sim --version\r\n\r\n# Launch an empty world\r\ngz sim empty.sdf\n"})}),"\n",(0,s.jsx)(e.h3,{id:"urdf-robot-description",children:"URDF Robot Description"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-xml",children:'<?xml version="1.0"?>\r\n\x3c!-- humanoid_leg.urdf - Simple humanoid leg for simulation --\x3e\r\n<robot name="humanoid_leg">\r\n  \r\n  \x3c!-- Base link (hip) --\x3e\r\n  <link name="hip_link">\r\n    <visual>\r\n      <geometry>\r\n        <box size="0.1 0.1 0.05"/>\r\n      </geometry>\r\n      <material name="gray">\r\n        <color rgba="0.5 0.5 0.5 1"/>\r\n      </material>\r\n    </visual>\r\n    <collision>\r\n      <geometry>\r\n        <box size="0.1 0.1 0.05"/>\r\n      </geometry>\r\n    </collision>\r\n    <inertial>\r\n      <mass value="2.0"/>\r\n      <inertia ixx="0.01" ixy="0" ixz="0" \r\n               iyy="0.01" iyz="0" izz="0.01"/>\r\n    </inertial>\r\n  </link>\r\n  \r\n  \x3c!-- Thigh link --\x3e\r\n  <link name="thigh_link">\r\n    <visual>\r\n      <origin xyz="0 0 -0.2"/>\r\n      <geometry>\r\n        <cylinder radius="0.04" length="0.4"/>\r\n      </geometry>\r\n    </visual>\r\n    <collision>\r\n      <origin xyz="0 0 -0.2"/>\r\n      <geometry>\r\n        <cylinder radius="0.04" length="0.4"/>\r\n      </geometry>\r\n    </collision>\r\n    <inertial>\r\n      <origin xyz="0 0 -0.2"/>\r\n      <mass value="3.0"/>\r\n      <inertia ixx="0.05" ixy="0" ixz="0" \r\n               iyy="0.05" iyz="0" izz="0.01"/>\r\n    </inertial>\r\n  </link>\r\n  \r\n  \x3c!-- Hip joint --\x3e\r\n  <joint name="hip_pitch" type="revolute">\r\n    <parent link="hip_link"/>\r\n    <child link="thigh_link"/>\r\n    <origin xyz="0 0 -0.025"/>\r\n    <axis xyz="0 1 0"/>\r\n    <limit lower="-1.57" upper="1.57" effort="100" velocity="5"/>\r\n    <dynamics damping="0.1" friction="0.05"/>\r\n  </joint>\r\n  \r\n  \x3c!-- Shin link --\x3e\r\n  <link name="shin_link">\r\n    <visual>\r\n      <origin xyz="0 0 -0.2"/>\r\n      <geometry>\r\n        <cylinder radius="0.03" length="0.4"/>\r\n      </geometry>\r\n    </visual>\r\n    <collision>\r\n      <origin xyz="0 0 -0.2"/>\r\n      <geometry>\r\n        <cylinder radius="0.03" length="0.4"/>\r\n      </geometry>\r\n    </collision>\r\n    <inertial>\r\n      <origin xyz="0 0 -0.2"/>\r\n      <mass value="2.0"/>\r\n      <inertia ixx="0.03" ixy="0" ixz="0" \r\n               iyy="0.03" iyz="0" izz="0.005"/>\r\n    </inertial>\r\n  </link>\r\n  \r\n  \x3c!-- Knee joint --\x3e\r\n  <joint name="knee_pitch" type="revolute">\r\n    <parent link="thigh_link"/>\r\n    <child link="shin_link"/>\r\n    <origin xyz="0 0 -0.4"/>\r\n    <axis xyz="0 1 0"/>\r\n    <limit lower="0" upper="2.5" effort="80" velocity="5"/>\r\n    <dynamics damping="0.1" friction="0.05"/>\r\n  </joint>\r\n\r\n</robot>\n'})}),"\n",(0,s.jsx)(e.h3,{id:"sdf-world-file",children:"SDF World File"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-xml",children:'<?xml version="1.0"?>\r\n\x3c!-- humanoid_world.sdf - Test environment for humanoid robots --\x3e\r\n<sdf version="1.8">\r\n  <world name="humanoid_test">\r\n    \r\n    \x3c!-- Physics configuration --\x3e\r\n    <physics type="ode">\r\n      <max_step_size>0.001</max_step_size>\r\n      <real_time_factor>1.0</real_time_factor>\r\n      <real_time_update_rate>1000</real_time_update_rate>\r\n      <ode>\r\n        <solver>\r\n          <type>quick</type>\r\n          <iters>50</iters>\r\n        </solver>\r\n      </ode>\r\n    </physics>\r\n    \r\n    \x3c!-- Lighting --\x3e\r\n    <light type="directional" name="sun">\r\n      <cast_shadows>true</cast_shadows>\r\n      <pose>0 0 10 0 0 0</pose>\r\n      <diffuse>0.8 0.8 0.8 1</diffuse>\r\n    </light>\r\n    \r\n    \x3c!-- Ground plane --\x3e\r\n    <model name="ground">\r\n      <static>true</static>\r\n      <link name="ground_link">\r\n        <collision name="collision">\r\n          <geometry>\r\n            <plane>\r\n              <normal>0 0 1</normal>\r\n              <size>100 100</size>\r\n            </plane>\r\n          </geometry>\r\n          <surface>\r\n            <friction>\r\n              <ode>\r\n                <mu>0.8</mu>\r\n                <mu2>0.8</mu2>\r\n              </ode>\r\n            </friction>\r\n          </surface>\r\n        </collision>\r\n        <visual name="visual">\r\n          <geometry>\r\n            <plane>\r\n              <normal>0 0 1</normal>\r\n              <size>100 100</size>\r\n            </plane>\r\n          </geometry>\r\n        </visual>\r\n      </link>\r\n    </model>\r\n    \r\n    \x3c!-- Obstacles for testing --\x3e\r\n    <model name="obstacle_box">\r\n      <pose>2 0 0.25 0 0 0</pose>\r\n      <static>true</static>\r\n      <link name="link">\r\n        <collision name="collision">\r\n          <geometry>\r\n            <box><size>0.5 0.5 0.5</size></box>\r\n          </geometry>\r\n        </collision>\r\n        <visual name="visual">\r\n          <geometry>\r\n            <box><size>0.5 0.5 0.5</size></box>\r\n          </geometry>\r\n          <material>\r\n            <ambient>1 0 0 1</ambient>\r\n          </material>\r\n        </visual>\r\n      </link>\r\n    </model>\r\n    \r\n  </world>\r\n</sdf>\n'})}),"\n",(0,s.jsx)(e.h3,{id:"ros-2-gazebo-bridge",children:"ROS 2 Gazebo Bridge"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",children:'#!/usr/bin/env python3\r\n"""\r\ngazebo_bridge.py - Bridge between Gazebo and ROS 2.\r\n"""\r\n\r\nimport rclpy\r\nfrom rclpy.node import Node\r\nfrom sensor_msgs.msg import JointState\r\nfrom std_msgs.msg import Float64MultiArray\r\n\r\n\r\nclass GazeboBridge(Node):\r\n    """Bridges Gazebo simulation with ROS 2 control."""\r\n    \r\n    def __init__(self):\r\n        super().__init__(\'gazebo_bridge\')\r\n        \r\n        # Subscribe to joint states from Gazebo\r\n        self.joint_sub = self.create_subscription(\r\n            JointState,\r\n            \'/joint_states\',\r\n            self.joint_callback,\r\n            10\r\n        )\r\n        \r\n        # Publish joint commands to Gazebo\r\n        self.cmd_pub = self.create_publisher(\r\n            Float64MultiArray,\r\n            \'/joint_commands\',\r\n            10\r\n        )\r\n        \r\n        self.get_logger().info(\'Gazebo bridge started\')\r\n    \r\n    def joint_callback(self, msg: JointState):\r\n        """Process joint states from simulation."""\r\n        for name, pos, vel in zip(msg.name, msg.position, msg.velocity):\r\n            self.get_logger().debug(f\'{name}: pos={pos:.3f}, vel={vel:.3f}\')\r\n\r\n\r\ndef main(args=None):\r\n    rclpy.init(args=args)\r\n    node = GazeboBridge()\r\n    rclpy.spin(node)\r\n    node.destroy_node()\r\n    rclpy.shutdown()\r\n\r\n\r\nif __name__ == \'__main__\':\r\n    main()\n'})}),"\n",(0,s.jsx)(e.h2,{id:"the-hardware-reality-warning",children:"The Hardware Reality (Warning)"}),"\n",(0,s.jsxs)(e.admonition,{title:"The Reality Gap",type:"danger",children:[(0,s.jsx)(e.p,{children:"Simulation is never perfect. Common issues when moving from Gazebo to real robots:"}),(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Friction"}),": Simulated friction rarely matches real surfaces"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Motor dynamics"}),": Real motors have delays and nonlinearities"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Sensor noise"}),": Real sensors are noisier than simulated ones"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Contact modeling"}),": Soft contacts are hard to simulate accurately"]}),"\n"]})]}),"\n",(0,s.jsxs)(e.admonition,{title:"Performance Requirements",type:"warning",children:[(0,s.jsx)(e.p,{children:"Gazebo with complex humanoid models requires significant compute:"}),(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"CPU"}),": Physics runs on CPU, needs fast single-thread performance"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"GPU"}),": Only needed for camera/LiDAR rendering"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"RAM"}),": 16GB minimum, 32GB recommended for complex scenes"]}),"\n"]})]}),"\n",(0,s.jsx)(e.h3,{id:"urdf-vs-sdf-comparison",children:"URDF vs SDF Comparison"}),"\n",(0,s.jsxs)(e.table,{children:[(0,s.jsx)(e.thead,{children:(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.th,{children:"Feature"}),(0,s.jsx)(e.th,{children:"URDF"}),(0,s.jsx)(e.th,{children:"SDF"})]})}),(0,s.jsxs)(e.tbody,{children:[(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.strong,{children:"Purpose"})}),(0,s.jsx)(e.td,{children:"Robot description"}),(0,s.jsx)(e.td,{children:"World + Robot"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.strong,{children:"Physics"})}),(0,s.jsx)(e.td,{children:"Basic"}),(0,s.jsx)(e.td,{children:"Advanced"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.strong,{children:"Sensors"})}),(0,s.jsx)(e.td,{children:"Limited"}),(0,s.jsx)(e.td,{children:"Comprehensive"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.strong,{children:"Plugins"})}),(0,s.jsx)(e.td,{children:"ROS-specific"}),(0,s.jsx)(e.td,{children:"Gazebo-native"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.strong,{children:"Use Case"})}),(0,s.jsx)(e.td,{children:"ROS robot models"}),(0,s.jsx)(e.td,{children:"Full simulations"})]})]})]}),"\n",(0,s.jsx)(e.h2,{id:"assessment",children:"Assessment"}),"\n",(0,s.jsx)(e.h3,{id:"recall",children:"Recall"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsx)(e.li,{children:"What is the difference between URDF and SDF formats?"}),"\n",(0,s.jsx)(e.li,{children:"What physics parameters affect simulation stability?"}),"\n",(0,s.jsx)(e.li,{children:"How do you bridge Gazebo with ROS 2?"}),"\n",(0,s.jsx)(e.li,{children:'What is the "reality gap" in robotics simulation?'}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"apply",children:"Apply"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsx)(e.li,{children:"Create a URDF model for a simple 2-DOF robot arm with proper inertial properties."}),"\n",(0,s.jsx)(e.li,{children:"Build a Gazebo world with stairs for testing humanoid climbing."}),"\n",(0,s.jsx)(e.li,{children:"Write a ROS 2 node that reads joint states from Gazebo and publishes them at 100 Hz."}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"analyze",children:"Analyze"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsx)(e.li,{children:"Why might a walking algorithm that works in Gazebo fail on a real robot?"}),"\n",(0,s.jsx)(e.li,{children:"Compare the trade-offs between simulation accuracy and speed."}),"\n",(0,s.jsx)(e.li,{children:"Design a testing strategy that uses simulation to reduce real-world testing time by 90%."}),"\n"]})]})}function h(n={}){const{wrapper:e}={...(0,t.R)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(c,{...n})}):c(n)}},8453(n,e,i){i.d(e,{R:()=>o,x:()=>l});var r=i(6540);const s={},t=r.createContext(s);function o(n){const e=r.useContext(t);return r.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function l(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(s):n.components||s:o(n.components),r.createElement(t.Provider,{value:e},n.children)}}}]);